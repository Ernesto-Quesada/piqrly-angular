<div class="h-100 app-shell">
  <mat-sidenav-container class="shell-container w-100 h-100">
    <!-- SIDEBAR -->
    <mat-sidenav
      #sidenav
      [mode]="isDesktop ? 'side' : 'over'"
      [(opened)]="opened"
      class="shell-sidenav"
    >
      <!-- SIDEBAR HEADER (MOBILE ONLY BRAND) -->
      <div class="sidenav-header container-fluid d-md-none">
        <div class="row align-items-center gx-2">
          <div class="col">
            <div class="brand brand-compact">
              <div class="brand-mark">P</div>
              <div class="brand-text">
                <!-- <div class="brand-title">Piqrly</div> -->
                <div class="brand-subtitle">Photos & QR sharing</div>
              </div>
            </div>
          </div>

          <div class="col-auto">
            <button
              mat-icon-button
              class="icon-bubble fab-icon"
              (click)="toggleSidenav(sidenav)"
              aria-label="Close menu"
            >
              <mat-icon>chevron_left</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- NAV -->
      <mat-nav-list class="nav">
        <a mat-list-item class="nav-item" [routerLink]="['/public']">
          <mat-icon>home</mat-icon>
          <span>Home</span>
        </a>

        <a mat-list-item class="nav-item">
          <mat-icon>download</mat-icon>
          <span>Download App</span>
        </a>
      </mat-nav-list>

      <div class="sidenav-footer">
        <a class="footer-link">
          <mat-icon>gavel</mat-icon>
          <span>Terms & Conditions</span>
        </a>
      </div>
    </mat-sidenav>

    <!-- CONTENT -->
    <mat-sidenav-content class="shell-content">
      <!-- GLOBAL HEADER -->
      <header class="app-header container-fluid">
        <div class="row align-items-center gx-2">
          <!-- MENU / CHEVRON -->
          <div class="col-auto">
            <button
              mat-icon-button
              class="icon-bubble fab-icon"
              (click)="toggleSidenav(sidenav)"
              aria-label="Toggle menu"
            >
              <mat-icon>{{ opened ? "chevron_left" : "menu" }}</mat-icon>
            </button>
          </div>

          <!-- BRAND -->
          <div class="col text-center text-md-start">
            <div class="brand-inline">
              <!-- <div class="brand-mark">P</div> -->
              <div class="brand-title">Piqrly</div>
            </div>
          </div>

          <!-- CART -->
          <div class="col-auto">
            <button
              *ngIf="cartBadgeCount > 0"
              mat-icon-button
              class="icon-bubble"
              [routerLink]="['/checkout']"
              aria-label="Cart"
            >
              <span
                matBadge="{{ cartBadgeCount }}"
                class="material-icons-outlined"
              >
                shopping_cart
              </span>
            </button>

            <div
              *ngIf="cartBadgeCount <= 0"
              style="width: 44px; height: 44px"
            ></div>
          </div>
        </div>
      </header>

      <!-- PAGE CONTENT -->
      <div class="page">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
